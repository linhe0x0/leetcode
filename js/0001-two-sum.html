<!DOCTYPE html><html><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if(!e)return localStorage.setItem('theme','light'),d.add('light');if("system"===e){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else d.add(e)}catch(e){}}()</script><link rel="stylesheet" href="https://rsms.me/inter/inter.css"/><title>Two Sum – 根号三</title><style>html{font-family:Inter,sans-serif}@supports(font-variation-settings:normal){html{font-family:'Inter var',sans-serif}}</style><meta name="msapplication-TileColor" content="#ffffff"/><meta name="theme-color" content="#ffffff"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="Content-Language" content="en"/><meta name="description" content="Nextra: the next docs builder"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@shuding_"/><meta property="og:title" content="Nextra: the next docs builder"/><meta property="og:description" content="Nextra: the next docs builder"/><meta name="apple-mobile-web-app-title" content="Nextra"/><meta name="next-head-count" content="15"/><link rel="preload" href="/leetcode/_next/static/css/e29ebb4ce467c54c.css" as="style"/><link rel="stylesheet" href="/leetcode/_next/static/css/e29ebb4ce467c54c.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/leetcode/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/leetcode/_next/static/chunks/webpack-4a1fa6ebb3abce13.js" defer=""></script><script src="/leetcode/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/leetcode/_next/static/chunks/main-83803dd478f5b5bc.js" defer=""></script><script src="/leetcode/_next/static/chunks/pages/_app-5f954a4215eff6f5.js" defer=""></script><script src="/leetcode/_next/static/chunks/847-d9480bfd278da2f0.js" defer=""></script><script src="/leetcode/_next/static/chunks/pages/js/0001-two-sum-134e5fde8119deeb.js" defer=""></script><script src="/leetcode/_next/static/QbtQyUK-20zR4UBF3Ncmz/_buildManifest.js" defer=""></script><script src="/leetcode/_next/static/QbtQyUK-20zR4UBF3Ncmz/_ssgManifest.js" defer=""></script><script src="/leetcode/_next/static/QbtQyUK-20zR4UBF3Ncmz/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="nextra-container main-container flex flex-col"><nav class="flex items-center bg-white z-20 fixed top-0 left-0 right-0 h-16 border-b border-gray-200 px-6 dark:bg-dark dark:border-gray-900 bg-opacity-[.97] dark:bg-opacity-100"><div class="w-full flex items-center mr-2"><a class="no-underline text-current inline-flex items-center hover:opacity-75" href="/">Leetcode</a></div><div class="flex-1"><div class="hidden md:inline-block mr-2"><div class="relative w-full nextra-search md:w-64"><div class="relative flex items-center"><input type="search" class="block w-full px-3 py-2 leading-tight border rounded appearance-none focus:outline-none focus:ring" placeholder="Search documentation..." spellcheck="false"/><div class="hidden sm:flex absolute inset-y-0 right-0 py-1.5 pr-1.5"><kbd class="inline-flex items-center px-2 font-sans text-sm font-medium text-gray-400 dark:text-gray-800 dark:border-gray-800 border rounded">/</kbd></div></div></div></div></div><button class="text-current p-2 cursor-pointer focus:ring outline-none" aria-label="Toggle theme"><svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" shape-rendering="geometricPrecision" aria-hidden="true"></svg></button><a class="text-current p-2" href="https://github.com/sqrthree/leetcode" target="_blank" rel="noreferrer"><svg height="24" viewBox="2 2 20 20" fill="none" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 3C7.0275 3 3 7.12937 3 12.2276C3 16.3109 5.57625 19.7597 9.15374 20.9824C9.60374 21.0631 9.77249 20.7863 9.77249 20.5441C9.77249 20.3249 9.76125 19.5982 9.76125 18.8254C7.5 19.2522 6.915 18.2602 6.735 17.7412C6.63375 17.4759 6.19499 16.6569 5.8125 16.4378C5.4975 16.2647 5.0475 15.838 5.80124 15.8264C6.51 15.8149 7.01625 16.4954 7.18499 16.7723C7.99499 18.1679 9.28875 17.7758 9.80625 17.5335C9.885 16.9337 10.1212 16.53 10.38 16.2993C8.3775 16.0687 6.285 15.2728 6.285 11.7432C6.285 10.7397 6.63375 9.9092 7.20749 9.26326C7.1175 9.03257 6.8025 8.08674 7.2975 6.81794C7.2975 6.81794 8.05125 6.57571 9.77249 7.76377C10.4925 7.55615 11.2575 7.45234 12.0225 7.45234C12.7875 7.45234 13.5525 7.55615 14.2725 7.76377C15.9937 6.56418 16.7475 6.81794 16.7475 6.81794C17.2424 8.08674 16.9275 9.03257 16.8375 9.26326C17.4113 9.9092 17.76 10.7281 17.76 11.7432C17.76 15.2843 15.6563 16.0687 13.6537 16.2993C13.98 16.5877 14.2613 17.1414 14.2613 18.0065C14.2613 19.2407 14.25 20.2326 14.25 20.5441C14.25 20.7863 14.4188 21.0746 14.8688 20.9824C16.6554 20.364 18.2079 19.1866 19.3078 17.6162C20.4077 16.0457 20.9995 14.1611 21 12.2276C21 7.12937 16.9725 3 12 3Z" fill="currentColor"></path></svg><span class="sr-only">GitHub</span></a><button class="block md:hidden p-2"><svg fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button><div class="-mr-2"></div></nav><div class="flex flex-1 h-full"><aside class="fixed h-screen bg-white dark:bg-dark flex-shrink-0 w-full md:w-64 md:sticky z-20 hidden md:block" style="top:4rem;height:calc(100vh - 4rem)"><div class="sidebar border-gray-200 dark:border-gray-900 w-full p-4 pb-40 md:pb-16 h-full overflow-y-auto"><div class="mb-4 block md:hidden"><div class="relative w-full nextra-search md:w-64"><div class="relative flex items-center"><input type="search" class="block w-full px-3 py-2 leading-tight border rounded appearance-none focus:outline-none focus:ring" placeholder="Search documentation..." spellcheck="false"/><div class="hidden sm:flex absolute inset-y-0 right-0 py-1.5 pr-1.5"><kbd class="inline-flex items-center px-2 font-sans text-sm font-medium text-gray-400 dark:text-gray-800 dark:border-gray-800 border rounded">/</kbd></div></div></div></div><div class="hidden md:block"><ul><li class=""><a href="/">Introduction</a></li><li class="active"><button>Go</button><div style="display:initial"><ul><li class=""><a href="/go/0001-two-sum">0001-Two-Sum</a></li><li class=""><a href="/go/0002-nim-game">0002-Nim-Game</a></li></ul></div></li><li class="active"><button>JS</button><div style="display:initial"><ul><li class="active"><a href="/js/0001-two-sum">0001-Two-Sum</a></li><li class=""><a href="/js/0002-nim-game">0002-Nim-Game</a></li></ul></div></li></ul></div><div class="md:hidden"><ul><li class=""><a href="/">Introduction</a></li><li class="active"><button>Go</button><div style="display:initial"><ul><li class=""><a href="/go/0001-two-sum">0001-Two-Sum</a></li><li class=""><a href="/go/0002-nim-game">0002-Nim-Game</a></li></ul></div></li><li class="active"><button>JS</button><div style="display:initial"><ul><li class="active"><a href="/js/0001-two-sum">0001-Two-Sum</a></li><li class=""><a href="/js/0002-nim-game">0002-Nim-Game</a></li></ul></div></li></ul></div></div></aside><div id="reach-skip-nav" data-reach-skip-nav-content=""></div><article class="docs-container relative pt-16 pb-16 px-6 md:px-8 w-full max-w-full flex min-w-0"><main class="max-w-screen-md mx-auto pt-4 z-10 min-w-0 w-full"><h1>Two Sum</h1>
<p><a target="_blank" rel="noreferrer" href="https://leetcode.com/problems/two-sum/">Go to the battlefield</a></p>
<h3><span class="subheading-anchor" id="instructions"></span><a href="#instructions" class="text-current no-underline no-outline">Instructions<span class="anchor-icon" aria-hidden="true">#</span></a></h3>
<p>Given an array of integers <code>nums</code> and an integer <code>target</code>, return indices of the two numbers such that they add up to <code>target</code>.</p>
<p>You may assume that each input would have <strong>exactly one solution</strong>, and you may not use the same element twice.</p>
<pre><code class="prism-code language-js" style="background-color:transparent"><div class="token-line"><span class="token comment" style="color:#999;font-style:italic">/**</span></div><div class="token-line"><span class="token comment" style="color:#999;font-style:italic"> * @param {number[]} nums</span></div><div class="token-line"><span class="token comment" style="color:#999;font-style:italic"> * @param {number} target</span></div><div class="token-line"><span class="token comment" style="color:#999;font-style:italic"> * @return {number[]}</span></div><div class="token-line"><span class="token comment" style="color:#999;font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:#ff0078;font-weight:bold">var</span><span class="token plain"> </span><span class="token function-variable function">twoSum</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ff0078;font-weight:bold">function</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token parameter punctuation">,</span><span class="token parameter"> target</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span></div></code></pre>
<h3><span class="subheading-anchor" id="test-cases"></span><a href="#test-cases" class="text-current no-underline no-outline">Test Cases<span class="anchor-icon" aria-hidden="true">#</span></a></h3>
<pre><code class="prism-code language-js" style="background-color:transparent"><div class="token-line"><span class="token plain">t</span><span class="token punctuation">.</span><span class="token method function property-access">deepEqual</span><span class="token punctuation">(</span><span class="token function">twoSum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">7</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">11</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">t</span><span class="token punctuation">.</span><span class="token method function property-access">deepEqual</span><span class="token punctuation">(</span><span class="token function">twoSum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">t</span><span class="token punctuation">.</span><span class="token method function property-access">deepEqual</span><span class="token punctuation">(</span><span class="token function">twoSum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span></div></code></pre>
<h3><span class="subheading-anchor" id="solution"></span><a href="#solution" class="text-current no-underline no-outline">Solution<span class="anchor-icon" aria-hidden="true">#</span></a></h3>
<pre><code class="prism-code language-js" style="background-color:transparent"><div class="token-line"><span class="token keyword" style="color:#ff0078;font-weight:bold">const</span><span class="token plain"> </span><span class="token function-variable function">twoSum</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ff0078;font-weight:bold">function</span><span class="token plain"> </span><span class="token function">twoSum</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token parameter punctuation">,</span><span class="token parameter"> target</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#ff0078;font-weight:bold">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style="color:#ff0078;font-weight:bold">let</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> nums</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#ff0078;font-weight:bold">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style="color:#ff0078;font-weight:bold">let</span><span class="token plain"> j </span><span class="token operator">=</span><span class="token plain"> i </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"> j </span><span class="token operator">&lt;</span><span class="token plain"> nums</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"> j </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#ff0078;font-weight:bold">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">nums</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> nums</span><span class="token punctuation">[</span><span class="token plain">j</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> target</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#ff0078;font-weight:bold">return</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">,</span><span class="token plain"> j</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></code></pre>
<h3><span class="subheading-anchor" id="discourse"></span><a href="#discourse" class="text-current no-underline no-outline">Discourse<span class="anchor-icon" aria-hidden="true">#</span></a></h3>
<p>这道题主要的要求是在给定的一系列数字中，找到两数之和为目标数值的位置。最简单的思路就是从头到尾逐个进行尝试，计算对比是否和目标值相等，这种方式也常被称之为“暴力破解”。</p>
<p>在这种思路下，主要的问题就变成了如何遍历出两两数字的所有组合。在上面的解题中，通过两层的嵌套循环，将当前位置的数值与后面的每一个进行组合计算达到遍历组合的目的。然后再计算出其和并和目标值相等，如果符合要求，因为题目中已经假设只会有一个答案，因此通过 <code>return</code> 提前终止循环避免后续不必要的计算。</p>
<div class="bg-yellow-200 text-yellow-900 dark:text-yellow-200 dark:bg-yellow-700 dark:bg-opacity-30 flex rounded-lg callout mt-6"><div class="pl-3 pr-2 py-2 select-none text-xl" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;">⚠️</div><div class="pr-4 py-2"><p>上面的解题思路简单粗暴，但是因为用到了两层循环嵌套，所以在数据量大的时候，会因为循环计算次数过多导致存在很大的计算压力。所以优化的目标在于如何减少循环次数。</p></div></div>
<h3><span class="subheading-anchor" id="improvement"></span><a href="#improvement" class="text-current no-underline no-outline">Improvement<span class="anchor-icon" aria-hidden="true">#</span></a></h3>
<pre><code class="prism-code language-js" style="background-color:transparent"><div class="token-line"><span class="token keyword" style="color:#ff0078;font-weight:bold">const</span><span class="token plain"> </span><span class="token function-variable function">twoSum</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ff0078;font-weight:bold">function</span><span class="token plain"> </span><span class="token function">twoSum</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token parameter punctuation">,</span><span class="token parameter"> target</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:#ff0078;font-weight:bold">const</span><span class="token plain"> obj </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#ff0078;font-weight:bold">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style="color:#ff0078;font-weight:bold">let</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> nums</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    obj</span><span class="token punctuation">[</span><span class="token plain">nums</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> i</span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#ff0078;font-weight:bold">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style="color:#ff0078;font-weight:bold">let</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> nums</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:#ff0078;font-weight:bold">const</span><span class="token plain"> expect </span><span class="token operator">=</span><span class="token plain"> target </span><span class="token operator">-</span><span class="token plain"> nums</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#ff0078;font-weight:bold">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">obj</span><span class="token punctuation">[</span><span class="token plain">expect</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token keyword nil" style="color:#ff0078;font-weight:bold">undefined</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> obj</span><span class="token punctuation">[</span><span class="token plain">expect</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> i</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#ff0078;font-weight:bold">return</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">,</span><span class="token plain"> obj</span><span class="token punctuation">[</span><span class="token plain">expect</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></code></pre>
<p>通过利用 JSON 的特性先获取到并存储所有的数值以及他们的位置，这样我们想获取其中某个值的时候，无论数据量有多大，其复杂度都是一样的。然后我们再去取个遍历，因此这次是单值遍历，所以判断思路需要调整为 <code>obj</code> 中是否存在目标数值减当前数值的值，如果存在，即符合要求，直接返回目标结果。</p>
<div class="bg-yellow-200 text-yellow-900 dark:text-yellow-200 dark:bg-yellow-700 dark:bg-opacity-30 flex rounded-lg callout mt-6"><div class="pl-3 pr-2 py-2 select-none text-xl" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;">⚠️</div><div class="pr-4 py-2"><p>在上面的解题中虽然已经减少了循环次数，但是还是做了 2 次遍历，并且因为提前存储了所有的数值到 <code>obj</code> 中，因此在判定是否存在的时候还要排除当前元素自身。</p></div></div>
<h3><span class="subheading-anchor" id="further-improvement"></span><a href="#further-improvement" class="text-current no-underline no-outline">Further improvement<span class="anchor-icon" aria-hidden="true">#</span></a></h3>
<pre><code class="prism-code language-js" style="background-color:transparent"><div class="token-line"><span class="token keyword" style="color:#ff0078;font-weight:bold">const</span><span class="token plain"> </span><span class="token function-variable function">twoSum</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ff0078;font-weight:bold">function</span><span class="token plain"> </span><span class="token function">twoSum</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token parameter punctuation">,</span><span class="token parameter"> target</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:#ff0078;font-weight:bold">const</span><span class="token plain"> obj </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#ff0078;font-weight:bold">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style="color:#ff0078;font-weight:bold">let</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> nums</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:#ff0078;font-weight:bold">const</span><span class="token plain"> expect </span><span class="token operator">=</span><span class="token plain"> target </span><span class="token operator">-</span><span class="token plain"> nums</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#ff0078;font-weight:bold">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">obj</span><span class="token punctuation">[</span><span class="token plain">expect</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token keyword nil" style="color:#ff0078;font-weight:bold">undefined</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#ff0078;font-weight:bold">return</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">obj</span><span class="token punctuation">[</span><span class="token plain">expect</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> i</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    obj</span><span class="token punctuation">[</span><span class="token plain">nums</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> i</span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></code></pre>
<p>通过上面的优化调整，将 2 次循环优化为一次循环即完成任务。主要是利用了组合时每一个元素都只和其后面的元素进行组合匹配即可，因此可以利用先判定再存储的思路来进行改进，同时也不需要考虑需要排除其自身的情况。</p>
<div class="bg-orange-100 text-orange-800 dark:text-orange-300 dark:bg-orange-200 dark:bg-opacity-10 flex rounded-lg callout mt-6"><div class="pl-3 pr-2 py-2 select-none text-xl" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;">🚀</div><div class="pr-4 py-2"><p>这是一个以空间换时间的思路，通过一个新的变量来存储需要的数据，来减少程序的运行次数，从而达到优化执行性能的目的。</p></div></div><footer class="mt-24"><div class="flex flex-row items-center justify-between"><div><a class="text-lg font-medium p-4 -m-4 no-underline text-gray-600 hover:text-blue-600 flex items-center mr-2" title="0002-Nim-Game" href="/go/0002-nim-game"><svg height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="transform inline flex-shrink-0 rotate-180 mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>0002-Nim-Game</a></div><div><a class="text-lg font-medium p-4 -m-4 no-underline text-gray-600 hover:text-blue-600 flex items-center ml-2" title="0002-Nim-Game" href="/js/0002-nim-game">0002-Nim-Game<svg height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="transform inline flex-shrink-0 ml-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></a></div></div><hr/><div class="mt-24 flex justify-between flex-col-reverse md:flex-row items-center md:items-end"><span class="text-gray-600"><span>MIT <!-- -->2022<!-- --> © </span><a href="https://github.com/sqrthree/" target="_blank">根号三</a></span><div class="mt-6"></div><a class="text-sm" href="https://github.com/sqrthree/leetcode/blob/main/pages/js/0001-two-sum.md" target="_blank" rel="noreferrer">Edit this page on GitHub</a></div></footer></main><div class="w-64 hidden xl:block text-sm pl-4"></div></article></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/js/0001-two-sum","query":{},"buildId":"QbtQyUK-20zR4UBF3Ncmz","assetPrefix":"/leetcode","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>